{% extends base_template %}

{% block scripts %}
{{ block.super }}
<script type="text/javascript" src="{% url static "js/visits.js" %}"></script>
{% if latest_ptr or latest_lsr %}
{% include "profiles/profile_scripts.html" %}
{% endif %}
<script type="text/javascript">
var student = "{{ student.id }}";
</script>
{% endblock %}

{% block body %}
<h1>{{ student.get_full_name }}</h1>
<h2>Current Enrollments</h2>
{% if current_enrollments %}
<table>
  <thead>
    <tr>
      <th>Course</th>
      <th>Title</th>
      <th>Credit Hours</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    {% for enrollment in current_enrollments %}
    <tr class="{% cycle "odd" "even" %}">
      <td style="width: 15%;">{{ enrollment.section.prefix }}{{ enrollment.section.number }}-{{ enrollment.section.section }}</td>
      <td style="width: 45%;">{{ enrollment.section.title }}</td>
      <td style="width: 15%;">{{ enrollment.section.credit_hours }}</td>
      <td style="width: 25%;">{{ enrollment.get_status_display }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p><em>Student is not currently enrolled in any courses</em></p>
{% endif %}
<div id="learning-style">
  <h2 class="float-left">
    Learning Style
  </h2>
  {% if latest_lsr %}
  <a href="javascript:;" class="modal float-right" ref="ls-window">view learning style details</a>
  {% endif %}
  {% if latest_lsr %}
  <div class="clear"></div>
  <div class="large-tile">
    <div id="learning-style-chart"></div>
  </div>
  {% else %}
  <div class="clear"></div>
  <p><em>Student has not completed the learning style assessment</em></p>
  {% endif %}
  <div id="ls-window"></div>
</div>
<div id="survey-results">
  <h2 class="float-left">Survey Results</h2>
  {% if student.result_set.all %}
  <div class="clear"></div>
  <div class="large-tile">
    <ul>
      {% for result in student.result_set.all %}
      <li>{{ result.date_taken|date:"F j, Y" }} <a href="javascript:;" class="modal" ref="survey-window" data-result-id="{{ result.id }}">view details</a></li>
      {% endfor %}
    </ul>
  </div>
  {% else %}
  <div class="clear"></div>
  <p><em>Student has not completed any surveys</em></p>
  {% endif %}
  <div id="survey-window"></div>
</div>
<div class="clear"></div>
<h2 class="float-left">
  Personality Type
</h2>
{% if latest_ptr %}
<a href="javascript:;" class="modal float-right" ref="pt-window">view personality type details</a>
{% endif %}
{% if latest_ptr %}
<div class="clear"></div>
<ul id="personality-type">
  <li>
    <h4>{{ latest_ptr.personality_type.0 }}</h4>
    <div id="personality-type-chart-1" class="chart"></div>
  </li>
  <li>
    <h4>{{ latest_ptr.personality_type.1 }}</h4>
    <div id="personality-type-chart-2" class="chart"></div>
  </li>
  <li>
    <h4>{{ latest_ptr.personality_type.2 }}</h4>
    <div id="personality-type-chart-3" class="chart"></div>
  </li>
  <li class="last">
    <h4>{{ latest_ptr.personality_type.3 }}</h4>
    <div id="personality-type-chart-4" class="chart"></div>
  </li>
</ul>
{% else %}
<div class="clear"></div>
<p><em>Student has not completed the personality type assessment</em></p>
{% endif %}
{% if not_student %}
<div class="clear"></div>
<h2 class="float-left">
  Visits
</h2>
<a class="float-right" href="{% url visit:submit-visit student.id %}">submit new visit</a>
<div class="clear"></div>
<div id="visits" style="min-height: 225px;">
{% if visits %}
{% include "visits/visits.html" %}
{% else %}
<div class="clear"></div>
<p>
  <em>Student has not had any visits</em>
</p>
{% endif %}
</div>
{% endif %}
<div id="pt-window"></div>
{% endblock %}
